<% provide(:page_title, @event.title) %>

<p id="notice"><%= notice %></p>

<div class="container mt-5 p-0">
  <div class="row">
    <div class="col">
      <h1 class="title  "><%= @event.title.capitalize %></h1>
    </div>
  </div>
  <div class="row pt-4">
    <div class="col-4 px-0 bg-light">
      <p class="p-4">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Alias aliquid amet architecto beatae
        consectetur corporis cupiditate dolor dolores ea eaque eos esse eum eveniet ex excepturi explicabo
        fugit incidunt ipsa iste, labore laborum nam neque nisi nobis non nostrum praesentium quas qui quisquam
        reiciendis repellat reprehenderit suscipit tempore ut, voluptatum!
      </p>
    </div>
    <div class="col-8 pl-0">
      <%= image_tag 'ensemble_photo.jpg', class: 'img-fluid' %>
    </div>
  </div>
</div>

<div class="container-fluid mt-5">
  <div class="row justify-content-center">
    <h1 class="title"><%= @event.title.capitalize %></h1>
  </div>
  <div class="row">
    <div id="wrapper">
      <div id="slider">
        <% if @event.images.attached? %>
          <% @event.images.each do |image| %>
            <div class="slide" style="background-image: url(<%= url_for(image) %>); background-repeat: no-repeat; background-size: cover">
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
    $(function () {
        $('#slider').carouFredSel({
            width: '100%',
            align: false,
            items: 3,
            items: {
                width: $('#wrapper').width() * 0.15,
                height: 500,
                visible: 1,
                minimum: 1
            },
            scroll: {
                items: 1,
                timeoutDuration: 5000,
                onBefore: function (data) {

                    //	find current and next slide
                    var currentSlide = $('.slide.active', this),
                        nextSlide = data.items.visible,
                        _width = $('#wrapper').width();

                    //	resize currentslide to small version
                    currentSlide.stop().animate({
                        width: _width * 0.15
                    });
                    currentSlide.removeClass('active');

                    //	hide current block
                    data.items.old.add(data.items.visible).find('.slide-block').stop().fadeOut();

                    //	animate clicked slide to large size
                    nextSlide.addClass('active');
                    nextSlide.stop().animate({
                        width: _width * 0.7
                    });
                },
                onAfter: function (data) {
                    //	show active slide block
                    data.items.visible.last().find('.slide-block').stop().fadeIn();
                }
            },
            onCreate: function (data) {

                //	clone images for better sliding and insert them dynamacly in slider
                var newitems = $('.slide', this).clone(true),
                    _width = $('#wrapper').width();

                $(this).trigger('insertItem', [newitems, newitems.length, false]);

                //	show images
                $('.slide', this).fadeIn();
                $('.slide:first-child', this).addClass('active');
                $('.slide', this).width(_width * 0.15);

                //	enlarge first slide
                $('.slide:first-child', this).animate({
                    width: _width * 0.7
                });

                //	show first title block and hide the rest
                $(this).find('.slide-block').hide();
                $(this).find('.slide.active .slide-block').stop().fadeIn();
            }
        });

        //	Handle click events
        $('#slider').children().click(function () {
            $('#slider').trigger('slideTo', [this]);
        });

        //	Enable code below if you want to support browser resizing
        $(window).resize(function () {

            var slider = $('#slider'),
                _width = $('#wrapper').width();

            //	show images
            slider.find('.slide').width(_width * 0.15);

            //	enlarge first slide
            slider.find('.slide.active').width(_width * 0.7);

            //	update item width config
            slider.trigger('configuration', ['items.width', _width * 0.15]);
        });

    });
</script>